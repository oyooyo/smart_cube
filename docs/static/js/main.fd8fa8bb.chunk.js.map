{"version":3,"sources":["mi_smart_magic_cube_utils.js","mi_smart_magic_cube_webbluetooth.js","CubeDisplay.js","App.js","reportWebVitals.js","index.js"],"names":["assert","assertion_fulfilled","error_message","Error","converse_angle_set_single","cube","angleFace","p1","p2","p3","c1","c2","c3","y_first","ANGLE_TO_C123","1","2","3","4","5","6","7","8","converseAngleSet","angle","f1","f2","f3","converse_line_set_single","lineFace","LINE_TO_C12","9","10","11","12","converse_line_set","line","converse_change_face_again","a1","a2","a3","a4","extract_nibbles","cubeOutputDataDebug","length","offset","Uint8Array","from","v","i","get_high_nibble_of","get_low_nibble_of","convert_decoded_bytes_to_wachino_facelets","decoded_bytes","Array","array2","array3","array4","array5","index","Math","floor","array","converse_to_paper_type","slice","uint8_value","DECODE_ARRAY","decode_encoded_bytes","encoded_bytes","map","data_byte","byte_index","convert_facelets","facelets","object","facelet_index_mapping","facelet_value_mapping","Object","fromEntries","entries","key","facelet_index","wachino_to_oyooyo_mappings","convert_wachino_facelets_to_oyooyo_facelets","wachino_facelets","join","oyooyo_to_cubejs_mappings","convert_oyooyo_facelets_to_cubejs_facelets","oyooyo_facelets","async_get_device","device","a","navigator","bluetooth","requestDevice","acceptAllDevices","optionalServices","async_get_server","gatt","connect","async_get_service","getPrimaryService","async_get_characteristic","getCharacteristic","async_subscribe_to_dataview","callback","characteristic","startNotifications","addEventListener","event","target","value","dataview_to_uint8array","dataview","buffer","async_subscribe_to_encoded_bytes","async_subscribe_to_decoded_bytes","async_subscribe_to_wachino_facelets","async_subscribe_to_oyooyo_facelets","V1","PI","V2","ROTATIONS","SIDES","SIDE_IDS","side_id_to_color","side_id","divide_without_remainder","number","divisor","divide_with_remainder","vector3_add","vector3_1","vector3_2","vector3_scalar_multiply","vector3","scalar","sticker_size","abs","create_sticker","x","y","z","color","geometry","BoxGeometry","material","MeshBasicMaterial","sticker","Mesh","position","set","create_arrow","rotation","cone_geometry","ConeGeometry","rotateZ","translate","cone","opacity","transparent","CubeDisplay","props","stickers","sticker_index","side_index","sticker_in_side_index","row_index","column_index","side_offset","column_delta","row_delta","sticker_position","push","create_stickers","arrows_object","group","Group","add","create_arrows_object","rotation_object","frame_index","mount","this","width","clientWidth","height","clientHeight","scene","Scene","camera","PerspectiveCamera","up","renderer","WebGLRenderer","setSize","canvas_element","domElement","appendChild","orbit_controls","OrbitControls","background","Color","animate","requestAnimationFrame","new_width","new_height","aspect","updateProjectionMatrix","update","render","state","setHex","visible","className","ref","React","Component","CubeJS","window","Cube","PleaseWaitMessage","children","role","CubeSolver","id","rotations","asyncInit","setState","old_facelets","new_cube","fromString","isSolved","old_cube","move","asString","asyncSolve","cubejs_rotations_string","layer_id","replaceAll","trim","split","type","onClick","on_cube_state_change","App","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.fd8fa8bb.chunk.js","sourcesContent":["const assert = (assertion_fulfilled, error_message='Assertion failed') => {\n\tif (! assertion_fulfilled) {\n\t\tthrow (new Error(error_message));\n\t}\n}\n\nconst converse_angle_set_single = (cube, angleFace, p1, p2, p3, c1, c2, c3, y_first) => {\n\tassert(((angleFace >= 1) && (angleFace <= 3)), 'Invalid angleFace');\n\tif (y_first && (angleFace <= 2)) {\n\t\tangleFace = ((angleFace === 1) ? 2 : 1);\n\t}\n\t[cube[p1], cube[p2], cube[p3]] = ((angleFace === 1) ? [c3, c1, c2] : ((angleFace === 2) ? [c2, c3, c1] : [c1, c2, c3]));\n}\n\nconst ANGLE_TO_C123 = {\n\t1: [1, 2, 3],\n\t2: [1, 3, 4],\n\t3: [1, 4, 5],\n\t4: [1, 5, 2],\n\t5: [6, 3, 2],\n\t6: [6, 4, 3],\n\t7: [6, 5, 4],\n\t8: [6, 2, 5],\n};\n\nconst converseAngleSet = (cube, angle, angleFace, f1, f2, f3, y_first) => {\n\tassert(((angle >= 1) && (angle <= 8)), 'Invalid angle');\n\tconverse_angle_set_single(cube, angleFace, f1, f2, f3, ...ANGLE_TO_C123[angle], y_first)\n}\n\nconst converse_line_set_single = (cube, lineFace, p1, p2, c1, c2) => {\n\tassert(((lineFace >= 1) && (lineFace <= 2)), 'Invalid lineFace');\n\t[cube[p1], cube[p2]] = ((lineFace === 1) ? [c1, c2] : [c2, c1]);\n};\n\nconst LINE_TO_C12 = {\n\t 1: [1, 2],\n\t 2: [1, 3],\n\t 3: [1, 4],\n\t 4: [1, 5],\n\t 5: [2, 3],\n\t 6: [4, 3],\n\t 7: [4, 5],\n\t 8: [2, 5],\n\t 9: [6, 2],\n\t10: [6, 3],\n\t11: [6, 4],\n\t12: [6, 5],\n};\n\nconst converse_line_set = function(cube, line, lineFace, p1, p2) {\n\tassert(((line >= 1) && (line <= 12)), 'Invalid line');\n\tconverse_line_set_single(cube, lineFace, p1, p2, ...LINE_TO_C12[line]);\n};\n\nconst converse_change_face_again = (cube, a1, a2, a3, a4) => {\n\t[cube[a1], cube[a2], cube[a3], cube[a4]] = [cube[a4], cube[a1], cube[a2], cube[a3]];\n};\n\nconst extract_nibbles = (cubeOutputDataDebug, length, offset) =>\n\tUint8Array.from({length:length}, ((v, i) => ((((i % 2) === 0) ? get_high_nibble_of : get_low_nibble_of)(cubeOutputDataDebug[offset + (i >> 1)]))))\n\nconst converse_to_paper_type = function(cubeOutputDataDebug) {\n\tassert(cubeOutputDataDebug.length >= 16);\n\tconst array2 = extract_nibbles(cubeOutputDataDebug,  8, 0);\n\tconst array3 = extract_nibbles(cubeOutputDataDebug,  8, 4);\n\tconst array4 = extract_nibbles(cubeOutputDataDebug, 12, 8);\n\tlet array5 = new Uint8Array(12);\n\tfor (let index=0; index < 12; index++) {\n\t\tarray5[index] = (((cubeOutputDataDebug[14 + Math.floor(index / 8)] & (1 << (7 - (index % 8)))) !== 0) ? 2 : 1);\n\t}\n\tlet array = new Uint8Array(55);\n\t[array[32], array[41], array[50], array[14], array[23], array[5]] = [1, 2, 3, 4, 5, 6];\n\tconverseAngleSet(array, array2[0], array3[0], 34, 43, 54, false);\n\tconverseAngleSet(array, array2[1], array3[1], 36, 52, 18, true);\n\tconverseAngleSet(array, array2[2], array3[2], 30, 16, 27, false);\n\tconverseAngleSet(array, array2[3], array3[3], 28, 25, 45, true);\n\tconverseAngleSet(array, array2[4], array3[4], 1, 48, 37, true);\n\tconverseAngleSet(array, array2[5], array3[5], 3, 12, 46, false);\n\tconverseAngleSet(array, array2[6], array3[6], 9, 21, 10, true);\n\tconverseAngleSet(array, array2[7], array3[7], 7, 39, 19, false);\n\tconverse_line_set(array, array4[0], array5[0], 31, 44);\n\tconverse_line_set(array, array4[1], array5[1], 35, 53);\n\tconverse_line_set(array, array4[2], array5[2], 33, 17);\n\tconverse_line_set(array, array4[3], array5[3], 29, 26);\n\tconverse_line_set(array, array4[4], array5[4], 40, 51);\n\tconverse_line_set(array, array4[5], array5[5], 15, 49);\n\tconverse_line_set(array, array4[6], array5[6], 13, 24);\n\tconverse_line_set(array, array4[7], array5[7], 42, 22);\n\tconverse_line_set(array, array4[8], array5[8], 4, 38);\n\tconverse_line_set(array, array4[9], array5[9], 2, 47);\n\tconverse_line_set(array, array4[10], array5[10], 6, 11);\n\tconverse_line_set(array, array4[11], array5[11], 8, 20);\n\tconverse_change_face_again(array, 1, 7, 9, 3);\n\tconverse_change_face_again(array, 4, 8, 6, 2);\n\tconverse_change_face_again(array, 37, 19, 10, 46);\n\tconverse_change_face_again(array, 38, 20, 11, 47);\n\tconverse_change_face_again(array, 39, 21, 12, 48);\n\tconverse_change_face_again(array, 40, 22, 13, 49);\n\tconverse_change_face_again(array, 41, 23, 14, 50);\n\tconverse_change_face_again(array, 42, 24, 15, 51);\n\tconverse_change_face_again(array, 43, 25, 16, 52);\n\tconverse_change_face_again(array, 44, 26, 17, 53);\n\tconverse_change_face_again(array, 45, 27, 18, 54);\n\tconverse_change_face_again(array, 34, 28, 30, 36);\n\tconverse_change_face_again(array, 31, 29, 33, 35);\n\treturn array;\n};\n\nconst convert_decoded_bytes_to_wachino_facelets = (decoded_bytes) =>\n\tArray.from(converse_to_paper_type(decoded_bytes)).slice(1)\n\nconst get_high_nibble_of = (uint8_value) =>\n\t(uint8_value >> 4)\n\nconst get_low_nibble_of = (uint8_value) =>\n\t(uint8_value & 15)\n\nconst DECODE_ARRAY = (new Uint8Array([\n\t0x50, 0xAF, 0x98, 0x20, 0xAA, 0x77, 0x13, 0x89, 0xDA,\n\t0xE6, 0x3F, 0x5F, 0x2E, 0x82, 0x6A, 0xAF, 0xA3, 0xF3,\n\t0x14, 0x07, 0xA7, 0x15, 0xA8, 0xE8, 0x8F, 0xAF, 0x2A,\n\t0x7D, 0x7E, 0x39, 0xFE, 0x57, 0xD9, 0x5B, 0x55, 0xD7,\n]));\n\nconst decode_encoded_bytes = (encoded_bytes) => {\n\tassert(((encoded_bytes.length === 20) && (encoded_bytes[18] === 167)), 'Invalid encoded bytes array');\n\treturn encoded_bytes.slice(0, 18).map((data_byte, byte_index) => (data_byte - DECODE_ARRAY[byte_index + get_low_nibble_of(encoded_bytes[19])] - DECODE_ARRAY[byte_index + get_high_nibble_of(encoded_bytes[19])]));\n};\n\nconst swap_keys_and_values = (object) =>\n\tObject.fromEntries(Object.entries(object).map(([key, value]) => [value, key]))\n\nconst convert_facelets = (facelets, [facelet_index_mapping, facelet_value_mapping]) =>\n\tArray.from({...swap_keys_and_values(facelet_index_mapping), length:facelets.length}, (facelet_index) => facelet_value_mapping[facelets[facelet_index]])\n\nconst wachino_to_oyooyo_mappings = [\n\t[\n\t\t36, 37, 38, 39, 40, 41, 42, 43, 44, 15, 12,  9, 16, 13, 10, 17, 14, 11,\n\t\t53, 52, 51, 50, 49, 48, 47, 46, 45, 26, 25, 24, 23, 22, 21, 20, 19, 18,\n\t\t29, 32, 35, 28, 31, 34, 27, 30, 33,  0,  1,  2,  3,  4,  5,  6,  7,  8,\n\t],\n\t{1:'F', 2:'D', 3:'R', 4:'U', 5:'L', 6:'B'},\n];\n\nconst convert_wachino_facelets_to_oyooyo_facelets = (wachino_facelets) =>\n\tconvert_facelets(wachino_facelets, wachino_to_oyooyo_mappings).join('')\n\nconst oyooyo_to_cubejs_mappings = [\n\t[\n\t\t 0,  1,  2,  3,  4,  5,  6,  7,  8, 36, 37, 38, 39, 40, 41, 42, 43, 44,\n\t\t18, 19, 20, 21, 22, 23, 24, 25, 26,  9, 10, 11, 12, 13, 14, 15, 16, 17,\n\t\t45, 46, 47, 48, 49, 50, 51, 52, 53, 27, 28, 29, 30, 31, 32, 33, 34, 35,\n\t],\n\t{'U':'U', 'L':'L', 'F':'F', 'R':'R', 'B':'B', 'D':'D'},\n];\n\nconst convert_oyooyo_facelets_to_cubejs_facelets = (oyooyo_facelets) =>\n\tconvert_facelets(Array.from(oyooyo_facelets), oyooyo_to_cubejs_mappings).join('')\n\nexport {convert_decoded_bytes_to_wachino_facelets, convert_oyooyo_facelets_to_cubejs_facelets, convert_wachino_facelets_to_oyooyo_facelets, decode_encoded_bytes};\n","import {convert_decoded_bytes_to_wachino_facelets, convert_wachino_facelets_to_oyooyo_facelets, decode_encoded_bytes} from './mi_smart_magic_cube_utils';\n\nconst async_get_device = async (device) =>\n\t(device\n\t\t? device\n\t\t: (await navigator.bluetooth.requestDevice({\n\t\t\t// The following filter doesn't work properly, and I don't yet know why.\n\t\t\t// For some reason, the cube is shown as 'Mi Smart Magic Cube' during scanning for BLE devices on my Linux PC,\n\t\t\t// but on my Android smartphone, the device is shown as not having a name.\n\t\t\t/*\n\t\t\tfilters: [{\n\t\t\t\tname: 'Mi Smart Magic Cube',\n\t\t\t}],\n\t\t\t*/\n\t\t\t// So until a better way is discovered that works in both environments, it seems necessary to scan for all BLE devices,\n\t\t\t// which is far from ideal because it's not apparent during scanning which of the found devices is the cube.\n\t\t\tacceptAllDevices: true,\n\t\t\toptionalServices: [0xAADB],\n\t\t}))\n\t)\n\nconst async_get_server = async (device) =>\n\t(await (await async_get_device(device)).gatt.connect())\n\nconst async_get_service = async (device) =>\n\t(await (await async_get_server(device)).getPrimaryService(0xAADB))\n\nconst async_get_characteristic = async (device) =>\n\t(await (await async_get_service(device)).getCharacteristic(0xAADC))\n\nconst async_subscribe_to_dataview = async (callback, device) => {\n\tconst characteristic = await async_get_characteristic(device);\n\tawait characteristic.startNotifications();\n\tcharacteristic.addEventListener('characteristicvaluechanged', (event) => {\n\t\tcallback(event.target.value);\n\t});\n}\n\nconst dataview_to_uint8array = (dataview) => \n\t(new Uint8Array(dataview.buffer))\n\nconst async_subscribe_to_encoded_bytes = async (callback, device) => {\n\tawait async_subscribe_to_dataview((dataview) => {\n\t\tcallback(dataview_to_uint8array(dataview));\n\t}, device);\n}\n\nconst async_subscribe_to_decoded_bytes = async (callback, device) => {\n\tawait async_subscribe_to_encoded_bytes((encoded_bytes) => {\n\t\tcallback(decode_encoded_bytes(encoded_bytes));\n\t}, device);\n}\n\nconst async_subscribe_to_wachino_facelets = async (callback, device) => {\n\tawait async_subscribe_to_decoded_bytes((decoded_bytes) => {\n\t\tcallback(convert_decoded_bytes_to_wachino_facelets(decoded_bytes));\n\t}, device);\n}\n\nconst async_subscribe_to_oyooyo_facelets = async (callback, device) => {\n\tawait async_subscribe_to_wachino_facelets((wachino_facelets) => {\n\t\tcallback(convert_wachino_facelets_to_oyooyo_facelets(wachino_facelets));\n\t}, device);\n}\n\nexport {async_subscribe_to_decoded_bytes, async_subscribe_to_encoded_bytes, async_subscribe_to_oyooyo_facelets, async_subscribe_to_wachino_facelets};\n","import React from 'react';\nimport {BoxGeometry, Color, ConeGeometry, Group, Mesh, MeshBasicMaterial, PerspectiveCamera, Scene, WebGLRenderer} from 'three';\nimport {OrbitControls} from 'three/examples/jsm/controls/OrbitControls.js';\n\nconst RADIAL_SEGMENTS = 16;\n\nconst STICKER_HEIGHT = (1 / 256);\n\nconst STICKER_LENGTH = 0.875;\n\nconst V1 = Math.PI;\n\nconst V2 = (V1 / 2);\n\nconst V3 = 2.5;\n\nconst ROTATIONS = {\n\t\"U\":[[0, 0, 1], [V2, 0, 0]],\n\t\"U'\":[[0, 0, 1], [-V2, 0, 0]],\n\t\"U2\":[[0, 0, 1], [V2, 0, 0]],\n\t\"L\":[[-1, 0, 0], [0, 0, V2]],\n\t\"L'\":[[-1, 0, 0], [0, 0, -V2]],\n\t\"L2\":[[-1, 0, 0], [0, 0, V2]],\n\t\"F\":[[0, -1, 0], [0, 0, V1]],\n\t\"F'\":[[0, -1, 0], [0, 0, 0]],\n\t\"F2\":[[0, -1, 0], [0, 0, V1]],\n\t\"R\":[[1, 0, 0], [0, 0, -V2]],\n\t\"R'\":[[1, 0, 0], [0, 0, +V2]],\n\t\"R2\":[[1, 0, 0], [0, 0, -V2]],\n\t\"B\":[[0, 1, 0], [0, 0, 0]],\n\t\"B'\":[[0, 1, 0], [0, 0, V1]],\n\t\"B2\":[[0, 1, 0], [0, 0, 0]],\n\t\"D\":[[0, 0, -1], [-V2, 0, 0]],\n\t\"D'\":[[0, 0, -1], [V2, 0, 0]],\n\t\"D2\":[[0, 0, -1], [-V2, 0, 0]],\n\n\t\"S\":[[0, 0, 0], [0, 0, V1]],\n\t\"S'\":[[0, 0, 0], [0, 0, 0]],\n\t\"S2\":[[0, 0, 0], [0, 0, V1]],\n\t\"E\":[[0, 0, 0], [-V2, 0, 0]],\n\t\"E'\":[[0, 0, 0], [V2, 0, 0]],\n\t\"E2\":[[0, 0, 0], [-V2, 0, 0]],\n\t\"M\":[[0, 0, 0], [0, 0, V2]],\n\t\"M'\":[[0, 0, 0], [0, 0, -V2]],\n\t\"M2\":[[0, 0, 0], [0, 0, V2]],\n};\n\nconst SIDES = [\n\t// Side 0: Up (White)\n\t[[-1, 1, 1.5], [1, 0, 0], [0, -1, 0], 0xFFFFFF],\n\t// Side 1: Left (Orange)\n\t[[-1.5, 1, 1], [0, -1, 0], [0, 0, -1], 0xFF8000],\n\t// Side 2: Front (Green)\n\t[[-1, -1.5, 1], [1, 0, 0], [0, 0, -1], 0x00FF00],\n\t// Side 3: Right (Red)\n\t[[1.5, -1, 1], [0, 1, 0], [0, 0, -1], 0xFF0000],\n\t// Side 4: Back (Blue)\n\t[[1, 1.5, 1], [-1, 0, 0], [0, 0, -1], 0x0000FF],\n\t// Side 5: Down (Yellow)\n\t[[-1, -1, -1.5], [1, 0, 0], [0, 1, 0], 0xFFFF00],\n];\n\nconst SIDE_IDS = {\n\t'U':0,\n\t'L':1,\n\t'F':2,\n\t'R':3,\n\t'B':4,\n\t'D':5,\n};\n\nconst side_id_to_color = (side_id) =>\n\tSIDES[SIDE_IDS[side_id]][3]\n\nconst divide_without_remainder = (number, divisor) =>\n\tMath.floor(number / divisor)\n\nconst divide_with_remainder = (number, divisor) =>\n\t[divide_without_remainder(number, divisor), (number % divisor)]\n\nconst vector3_add = (vector3_1, vector3_2) =>\n\t[(vector3_1[0] + vector3_2[0]), (vector3_1[1] + vector3_2[1]), (vector3_1[2] + vector3_2[2])]\n\nconst vector3_scalar_multiply = (vector3, scalar) =>\n\t[(vector3[0] * scalar), (vector3[1] * scalar), (vector3[2] * scalar)]\n\nconst sticker_size = (value) =>\n\t((Math.abs(value) > 1) ? STICKER_HEIGHT : STICKER_LENGTH);\n\nconst create_sticker = (x=0, y=0, z=0, color=0x808080) => {\n\tconst geometry = (new BoxGeometry(sticker_size(x), sticker_size(y), sticker_size(z)));\n\tconst material = (new MeshBasicMaterial({color:color}));\n\tconst sticker = (new Mesh(geometry, material));\n\tsticker.position.set(x, y, z);\n\treturn sticker;\n}\n\nconst create_stickers = () => {\n\tconst stickers = []\n\tfor (let sticker_index = 0; (sticker_index < 54); sticker_index++) {\n\t\tconst [side_index, sticker_in_side_index] = divide_with_remainder(sticker_index, 9);\n\t\tconst [row_index, column_index] = divide_with_remainder(sticker_in_side_index, 3);\n\t\tconst [side_offset, column_delta, row_delta, color] = SIDES[side_index];\n\t\tconst sticker_position = vector3_add(vector3_add(side_offset, vector3_scalar_multiply(row_delta, row_index)), vector3_scalar_multiply(column_delta, column_index));\n\t\tconst sticker = create_sticker(...sticker_position, color);\n\t\tstickers.push(sticker);\n\t}\n\treturn stickers;\n}\n\nconst create_arrow = (rotation) => {\n\tconst cone_geometry = (new ConeGeometry(0.25, 1.0, RADIAL_SEGMENTS));\n\tcone_geometry.rotateZ(V2);\n\tcone_geometry.translate(0, 0, V3);\n\tconst cone = (new Mesh(cone_geometry, (new MeshBasicMaterial({color:0xFFFFFF, opacity:0.75, transparent:true}))));\n\tcone.rotation.set(0, -rotation, 0);\n\treturn cone;\n}\n\nconst create_arrows_object = () => {\n\tconst group = (new Group());\n\tfor (let i=0; i < 8; i++) {\n\t\tgroup.add(create_arrow((V1 * i) / 4));\n\t}\n\treturn group;\n}\n\nconst CubeDisplay = class extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.stickers = create_stickers();\n\t\tthis.arrows_object = create_arrows_object();\n\t\tthis.rotation_object = (new Group());\n\t\tthis.rotation_object.add(this.arrows_object);\n\t\tthis.rotation_object.add(new Mesh((new BoxGeometry(3.01, 1.01, 3.01)), (new MeshBasicMaterial({color:0xFFFFFF, opacity:0.5, transparent:true}))));\n\t\tthis.frame_index = 0;\n\t}\n\tcomponentDidMount() {\n\t\tconst mount = this.mount;\n\t\tlet width = mount.clientWidth;\n\t\tlet height = mount.clientHeight;\n\t\tconst scene = (new Scene());\n\t\tconst camera = (new PerspectiveCamera(60, (width / height), 0.1, 100));\n\t\tcamera.up.set(0, 0, 1);\n\t\tcamera.position.set(4, -5, 4);\n\t\tconst renderer = (new WebGLRenderer());\n\t\trenderer.setSize(width, height);\n\t\tconst canvas_element = renderer.domElement;\n\t\tmount.appendChild(canvas_element);\n\t\tconst orbit_controls = (new OrbitControls(camera, canvas_element));\n\t\tscene.background = (new Color(0x406080));\n\t\tscene.add(new Mesh((new BoxGeometry(3, 3, 3)), (new MeshBasicMaterial({color:0x202020}))));\n\t\tfor (let sticker of this.stickers) {\n\t\t\tscene.add(sticker);\n\t\t}\n\t\tscene.add(this.rotation_object);\n\t\tconst animate = () => {\n\t\t\trequestAnimationFrame(animate);\n\t\t\tconst new_width = mount.clientWidth;\n\t\t\tconst new_height = mount.clientHeight;\n\t\t\tif ((new_width !== width) || (new_height !== height)) {\n\t\t\t\tcamera.aspect = (new_width / new_height);\n\t\t\t\tcamera.updateProjectionMatrix();\n\t\t\t\trenderer.setSize(new_width, new_height);\n\t\t\t\twidth = new_width;\n\t\t\t\theight = new_height;\n\t\t\t}\n\t\t\torbit_controls.update();\n\t\t\tthis.arrows_object.rotation.set(0, -((this.frame_index * V1 / 120) % V1), 0);\n\t\t\trenderer.render(scene, camera);\n\t\t\tthis.frame_index++;\n\t\t};\n\t\tanimate();\n\t}\n\trender() {\n\t\tfor (let sticker_index=0; (sticker_index < 54); sticker_index++) {\n\t\t\tconst side_id = this.props.state[sticker_index];\n\t\t\tthis.stickers[sticker_index].material.color.setHex(side_id_to_color(side_id));\n\t\t}\n\t\tif (this.props.rotation) {\n\t\t\tthis.rotation_object.visible = true;\n\t\t\tconst [position, rotation] = ROTATIONS[this.props.rotation];\n\t\t\tthis.rotation_object.position.set(...position);\n\t\t\tthis.rotation_object.rotation.set(...rotation);\n\t\t} else {\n\t\t\tthis.rotation_object.visible = false;\n\t\t}\n\t\treturn (\n\t\t\t<div\n\t\t\t\tclassName=\"cube_display\"\n\t\t\t\tref={(ref) => {this.mount = ref}}\n\t\t\t/>\n\t\t);\n\t}\n}\n\nexport default CubeDisplay;\n","import 'bootstrap/dist/css/bootstrap.css';\nimport './App.css';\nimport React from 'react';\nimport {async_subscribe_to_oyooyo_facelets} from './mi_smart_magic_cube_webbluetooth';\nimport {convert_oyooyo_facelets_to_cubejs_facelets} from './mi_smart_magic_cube_utils';\nimport CubeDisplay from './CubeDisplay';\nconst CubeJS = window.Cube;\n\nconst PleaseWaitMessage = ({children}) =>\n\t<div className=\"text-center\">\n\t\t<div className=\"spinner-border\" role=\"status\">\n\t\t\t<span className=\"visually-hidden\">Please wait...</span>\n\t\t</div>\n\t\t<div className=\"mt-3\">\n\t\t\t{children}\n\t\t</div>\n\t</div>\n\nconst CubeSolver = class extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tid:'initializing_solver',\n\t\t\tfacelets:null,\n\t\t\trotations:null,\n\t\t};\n\t}\n\tcomponentDidMount() {\n\t\tCubeJS.asyncInit('cubejs/worker.js', () => {\n\t\t\tthis.setState({id:'waiting_for_user_gesture'});\n\t\t});\n\t}\n\ton_cube_state_change(facelets) {\n\t\tconst old_facelets = this.state.facelets;\n\t\tthis.setState({facelets:facelets});\n\t\tconst new_cube = CubeJS.fromString(convert_oyooyo_facelets_to_cubejs_facelets(facelets));\n\t\tif (new_cube.isSolved()) {\n\t\t\tthis.setState({id:'solved', rotations:[]});\n\t\t} else {\n\t\t\tif (this.state.rotations && (this.state.rotations.length > 0)) {\n\t\t\t\tconst old_cube = CubeJS.fromString(convert_oyooyo_facelets_to_cubejs_facelets(old_facelets));\n\t\t\t\told_cube.move(this.state.rotations[0]);\n\t\t\t\tif (new_cube.asString() === old_cube.asString()) {\n\t\t\t\t\tthis.setState({id:'displaying_next_rotation', rotations:this.state.rotations.slice(1)});\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.setState({id:'solving', rotations:null});\n\t\t\tnew_cube.asyncSolve((cubejs_rotations_string) => {\n\t\t\t\tfor (let layer_id of ['U', 'L', 'F', 'R', 'B', 'D', 'S', 'E', 'M']) {\n\t\t\t\t\tcubejs_rotations_string = cubejs_rotations_string.replaceAll(`${layer_id}2`, `${layer_id} ${layer_id}`);\n\t\t\t\t}\n\t\t\t\tthis.setState({id:'displaying_next_rotation', rotations:cubejs_rotations_string.trim().split(' ')});\n\t\t\t});\n\t\t}\n\t}\n\trender() {\n\t\tswitch(this.state.id) {\n\t\t\tcase 'initializing_solver':\n\t\t\t\treturn (\n\t\t\t\t\t<PleaseWaitMessage>\n\t\t\t\t\t\tInitializing Rubik's Cube Solver...\n\t\t\t\t\t</PleaseWaitMessage>\n\t\t\t\t);\n\t\t\tcase 'waiting_for_user_gesture':\n\t\t\t\treturn (\n\t\t\t\t\t('bluetooth' in navigator) \n\t\t\t\t\t? (\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t\tRotate the Mi Smart Magic Cube (to ensure it is turned on), then click the button below to connect to it. A new dialogue will open, showing all Bluetooth LE devices in range, and asking you to select the device.\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t<div className=\"alert alert-warning\" role=\"alert\">\n\t\t\t\t\t\t\t\t\tUnfortunately, it can be hard to indentify which one of the shown devices the Mi Smart Magic Cube is. The device may show up as \"Mi Smart Magic Cube\", in which case choosing is simple. If there is no device with that name, it will be one of the devices that are shown without a name. If there are multiple, the signal strength indicator may help - place the cube next to your device, and the signal strength should be very high.\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"d-grid mt-3\">\n\t\t\t\t\t\t\t\t<button className=\"btn btn-primary\" type=\"button\" onClick={() => {\n\t\t\t\t\t\t\t\t\tthis.setState({id:'connecting'});\n\t\t\t\t\t\t\t\t\tasync_subscribe_to_oyooyo_facelets((facelets) => {\n\t\t\t\t\t\t\t\t\t\tthis.on_cube_state_change(facelets);\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t\t\tConnect to Mi Smart Magic Cube\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)\n\t\t\t\t\t: (\n\t\t\t\t\t\t<div className=\"alert alert-danger\" role=\"alert\">\n\t\t\t\t\t\t\tSorry, a webbrowser that supports the Web Bluetooth API is required. Right now, recent Chrome-based webbrowsers are the only ones that do.\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t\tcase 'connecting':\n\t\t\t\treturn (\n\t\t\t\t\t<PleaseWaitMessage>\n\t\t\t\t\t\tConnecting to Mi Smart Magic Cube...\n\t\t\t\t\t</PleaseWaitMessage>\n\t\t\t\t);\n\t\t\tcase 'solving':\n\t\t\t\treturn (\n\t\t\t\t\t<PleaseWaitMessage>\n\t\t\t\t\t\tSolving...\n\t\t\t\t\t</PleaseWaitMessage>\n\t\t\t\t);\n\t\t\tcase 'displaying_next_rotation':\n\t\t\t\treturn (\n\t\t\t\t\t<CubeDisplay state={this.state.facelets} rotation={this.state.rotations[0]} />\n\t\t\t\t);\n\t\t\tcase 'solved':\n\t\t\t\treturn (\n\t\t\t\t\t<CubeDisplay state={this.state.facelets} />\n\t\t\t\t);\n\t\t\tdefault:\n\t\t\t\tthrow (new Error(`Invalid state ID ${this.state.id}`));\n\t\t}\n\t}\n}\n\nconst App = () =>\n\t<div className=\"App container-fluid\">\n\t\t<CubeSolver />\n\t</div>\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n\tif (onPerfEntry && onPerfEntry instanceof Function) {\n\t\timport('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n\t\t\tgetCLS(onPerfEntry);\n\t\t\tgetFID(onPerfEntry);\n\t\t\tgetFCP(onPerfEntry);\n\t\t\tgetLCP(onPerfEntry);\n\t\t\tgetTTFB(onPerfEntry);\n\t\t});\n\t}\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n\t<React.StrictMode>\n\t\t<App />\n\t</React.StrictMode>,\n\tdocument.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}